package com.library.dao;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.List;

import com.library.model.Book;
import com.library.model.Member;
public class BookDAO {
  Book b=new Book();
  Member m = new Member();
  String url = "jdbc:mysql://localhost:3306/emp_management";
  String username = "root";
  String password = "RootPassword@7";
 public void addMember(List<Book> bl,List<Member> ml){
	 System.out.println(bl);
	 System.out.println(ml);
	 
  try (Connection connection = DriverManager.getConnection(url, username, password)) {
	  for (Book book : bl) {
		  System.out.println(book.getBookid());
		  System.out.println(book.getBookname());
		  System.out.println(book.getAuthor());
		  System.out.println(book.getAvailability());
		  String sql = "INSERT INTO books (bookid, title, author,avilable) VALUES (?, ?,?,?)";
		  PreparedStatement statement = connection.prepareStatement(sql);
          statement.setInt(1, book.getBookid());
          statement.setString(2, book.getBookname());
          statement.setString(3, book.getAuthor());
          statement.setString(4, book.getAvailability());
          int rowsAffected = statement.executeUpdate();
          System.out.println(rowsAffected);

      }
	  for (Member mem : ml) {
		  String sql = "INSERT INTO memberdetails (mid, bookid, mname,returnconfirmation) VALUES (?, ?,?,?)";
		  PreparedStatement statement = connection.prepareStatement(sql);
          statement.setInt(1, mem.getMemberId());
          statement.setInt(2, mem.getBookborrowed());
          statement.setString(3, mem.getMemberName());
          statement.setString(4, mem.getReturnstatus());
          int rowsAffected = statement.executeUpdate();
          System.out.println(rowsAffected);

      }


}
  catch (SQLException e) {
      e.printStackTrace();
  }

}}
